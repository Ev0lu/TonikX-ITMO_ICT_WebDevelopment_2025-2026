# Задание 4 — TCP чат (многопоточность)

## Цель
Организовать многопользовательский чат с сервером‑ретранслятором.

## Протокол и модель
- TCP‑соединения с каждым клиентом.
- На каждого клиента — отдельный поток обработки (`threading.Thread`).
- Общий список клиентов защищается `Lock`.

## Файлы
- `Lr1/ex4/chat_server.py`
- `Lr1/ex4/chat_client.py`

## Логика сервера
1. `listen()` → `accept()` для каждого входящего.
2. В новом потоке: принять первую строку как имя, зарегистрировать клиента.
3. Любые последующие строки транслировать всем остальным (`broadcast`), источник можно исключить.
4. На отключение/ошибку — снять регистрацию, закрыть сокет, уведомить остальных.

## Логика клиента
1. Подключиться, отправить имя (первая строка).
2. Читать входящие и печатать их.
3. Вводить строки для отправки. Команда `/quit` — корректный выход.

## Запуск
- Сервер: `cd ...\Lr1\ex4 && python chat_server.py`
- Клиент (несколько окон): `cd ...\Lr1\ex4 && python chat_client.py`

## Нюансы и отладка
- По умолчанию сервер не логирует события в консоль (только рассылает).  
  Для отладки можно добавить `print()` в места join/msg/quit/leave.
- Удаление «мертвых» соединений в `broadcast()` предотвращает зависания при отправке.


