# Отчёт

**ФИО:** Никифоров М.А.  
**Группа:** K3339  
**Дисциплина:** Web-программирование


## Лабораторная работа 1

### Задание 1 (ex1) — UDP эхо
- **Протокол и сокет:** UDP (`socket.SOCK_DGRAM`), адресное семейство IPv4 (`AF_INET`).
- **Файлы:** `ex1/server.py`, `ex1/client.py`.
- **Логика:**
  - Сервер: `bind(HOST, PORT)`, бесконечный цикл `recvfrom() → print → sendto()`.
  - Клиент: `sendto("Hello, server") → recvfrom()`.
- **Как запускать:**
  - Терминал 1: `cd ...\Lr1\ex1 && python server.py`
  - Терминал 2: `cd ...\Lr1\ex1 && python client.py`

### Задание 2 (ex2) — TCP калькулятор
- **Протокол и сокет:** TCP (`socket.SOCK_STREAM`).
- **Файлы:** `ex2/server.py`, `ex2/client.py`.
- **Логика:**
  - Сервер: `listen() → accept() → recv() → handle_request() → sendall() → close()`.
  - Поддерживаем команды: `PYTH a b` (гипотенуза), `QUAD a b c` (квадратное), `TRAP a b h` (площадь трапеции), `PARA a h` (параллелограмм).
  - Разбор аргументов: `parts = req.split()`, `parts[1:1+n]` — взять ровно `n` параметров после имени операции.
- **Как запускать:** аналогично ex1, но это TCP; обращаться клиентом по `localhost:8080`.

### Задание 3 (ex3) — Мини‑HTTP сервер
- **Протокол:** HTTP/1.1 поверх TCP.
- **Файлы:** `ex3/server.py`, `ex3/Index.html`.
- **Логика:**
  - Сервер принимает запрос, игнорирует тело, читает файл и формирует корректный HTTP‑ответ с заголовками: `Status-Line`, `Content-Type`, `Content-Length`, `Connection: close`.
  - Рендер: просто отдача статического HTML.
- **Как запускать:** `cd ...\Lr1\ex3 && python server.py`, в браузере `http://localhost:8080/`.

### Задание 4 (ex4) — TCP чат (многопоточность)
- **Протокол и сокет:** TCP, многопоточность (`threading.Thread`) для клиентов.
- **Файлы:** `ex4/chat_server.py`, `ex4/chat_client.py`.
- **Логика:**
  - Сервер: `listen() → accept()` в цикле; на каждого клиента — поток `handle_client()`.  
  - Хранение подключений: `clients` (словарь сокет → имя) под `clients_lock`.  
  - Рассылка: `broadcast()` рассылает всем, кроме источника, удаляет «мертвые» сокеты и уведомляет о выходе.
  - Клиент отправляет первую строку как имя, далее сообщения построчно; команда `/quit` — выход.
- **Как запускать:**
  - Сервер: `cd ...\Lr1\ex4 && python chat_server.py`
  - Клиент(ы): `cd ...\Lr1\ex4 && python chat_client.py`, ввести имя, писать сообщения.
- **Наблюдение:** сервер по умолчанию не печатает сообщения в консоль — он только транслирует их другим клиентам. Для логов можно добавить `print()` в местах `join/msg/quit/leave`.

### Задание 5 (ex5) — HTTP сервер с формой «Оценки»
- **Протокол:** HTTP/1.1 поверх TCP.
- **Файлы:** `ex5/server.py`, `ex5/template.html`.
- **Логика:**
  - GET `/`: отдать HTML, подставив список оценок в шаблон.
  - POST `/`: парсинг `application/x-www-form-urlencoded` (`parse_qs`), валидация, сохранение и редирект на `/`.
  - Валидация: длина и состав названия дисциплины; оценка — целое от 1 до 5.
- **Хранение данных:** в памяти процесса — `self.grades = {}`. Пока сервер не перезапущен, данные остаются; при рестарте — очищаются.
- **Расширения (идеи):**
  - Кнопка «Очистить» (POST `/clear`) → `self.grades.clear()`.
  - Персистентность: сохранять/читать `grades.json`.
- **Как запускать:** `python server.py <host> <port>`, например: `python server.py localhost 8080`, открыть `http://localhost:8080/`.
